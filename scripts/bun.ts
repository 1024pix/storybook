#!/usr/bin/env bun

import { exec } from 'bun-utilities';
import { relative } from 'path';
import chalk from 'chalk';

const pink = chalk.hex(`#FF4785`);

const run = (command: string, cwd: string = __dirname) => {
  console.log('');
  const startTime = Date.now();
  console.info(pink`Running command: \`${command}\`:`);
  console.log('');
  const out = exec(command.split(' '), { cwd, stderr: 'inherit', stdout: 'inherit' });

  if (out.isExecuted && out.exitCode !== 0) {
    console.log('');
    throw new Error(
      `command: "${command}" failed (${out.exitCode}) in "./${relative(cwd, process.cwd())}"`
    );
  }
  const time = Date.now() - startTime;
  if (time > 0) {
    console.log('');
    console.info(pink`finished in ${time} ms`);
  }
};

const w = chalk.bgWhiteBright;
console.log(pink`
                                             ▒▒▒  
             ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓${w`       `}▓▓▓▓▓▒
 ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`       `}▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`       `}▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▒▒`}▓▓▓${w`▒▒`}▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓▓▓▓▓▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓              ▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓                    `}▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓                      ▓`}▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓${w`▓                        `}▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓${w`           `}▓▓▓▓${w`▓         ▓`}▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓${w`          ▓`}▓▓▓▓▓${w`          `}▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓${w`▓           ▓`}▓▓▓${w`▓▓▓▓▓▓▓▓▓▓`}▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓▓${w`             ▓▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓               ▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓                ▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓▓               ▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓
 ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓▓              `}▓▓▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓${w`▓▓▓▓▓▓▓▓▓▓`}▓▓▓${w`▓            `}▓▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓${w`          `}▓▓▓▓▓${w`▓          ▓`}▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓${w`          `}▓▓▓▓▓▓${w`          ▓`}▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓${w`           ▓▓▓▓           `}▓▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓▓${w`                        ▓`}▓▓▓▓▓▓▓▓▓▓▓
 ▒▓▓▓▓▓▓▓▓▓▓▓▓▓${w`                      ▓`}▓▓▓▓▓▓▓▓▓▓▓▓
  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓▓                ▓▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓
  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓${w`▓▓▓▓    ▓▓▓▓`}▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
  ▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒
                                             ▒▒▒`);

run('echo "HELLO WORLD"');
